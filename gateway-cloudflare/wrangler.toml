name = "qei-public-assistant-gateway"
main = "worker.js"
compatibility_date = "2025-12-01"

[ai]
binding = "AI"

[[vectorize]]
binding = "VDB"
index_name = "qei-public-kb"

[[r2_buckets]]
binding = "PUBLIC_DOCS"
bucket_name = "qei-public-docs"

[[durable_objects.bindings]]
name = "RL"
class_name = "RateLimiter"

[[migrations]]
tag = "v1"
new_classes = ["RateLimiter"]

[vars]
ALLOWED_ORIGINS = "https://ammar20202030.github.io"

EMBED_MODEL = "@cf/baai/bge-base-en-v1.5"
TEXT_MODEL  = "@cf/meta/llama-3.1-8b-instruct"

TOP_K = "6"
RL_WINDOW_SEC = "60"
RL_MAX_REQ_PER_WINDOW = "20"

MAX_INPUT = "2000"
MAX_OUTPUT = "4500"
